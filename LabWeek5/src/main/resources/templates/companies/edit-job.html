<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Edit job</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous"/>
    <!-- Add Font Awesome CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        /* Tùy chỉnh nút trong sidebar */
        .sidebar-link {
            height: 45px;
            display: flex;
            align-items: center;
            border-top: 1px solid #ddd;
            border-bottom: 1px solid #ddd;
            text-decoration: none;
        }
    </style>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>

</head>
<body>
<!-- Header -->
<header class="bg-light py-3 border-bottom">
    <div class="container">
        <div class="d-flex justify-content-end align-items-center">
            <!-- User Info Area -->
            <div class="d-flex align-items-center">
                <a class="me-3" style="text-decoration: none; color: inherit;" th:href="@{#}">
                    <strong>[[${companyLogin.compName}]]</strong>
                </a>
                <form action="/login" method="post">
                    <input type="hidden" name="action" value="logout">
                    <button class="btn btn-outline-danger">Logout</button>
                </form>
            </div>
        </div>
    </div>
</header>
<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <nav class="col-md-2 bg-light p-3 vh-100 position-fixed">
            <h5>Company</h5>
            <div class="nav flex-column">
                <a class="btn btn-link text-start sidebar-link bg-primary text-white" th:href="@{/companies}">Company
                    home</a>
                <a class="btn btn-link text-start sidebar-link bg-primary text-white"
                   th:href="@{/companies/manage-jobs}">Job manager</a>
                <a class="btn btn-link text-start sidebar-link bg-primary text-white" th:href="@{/jobs/edit-job}">Create
                    job</a>
            </div>

            <!-- Thông tin công ty -->
            <div class="company-info mt-4">
                <h4>Company Details</h4>
                <p><strong>Location:</strong>
                    <span>
                        [[${companyLogin.address.number}]], [[${companyLogin.address.street}]], [[${companyLogin.address.city}]], [[${companyLogin.address.country}]]
                    </span>
                </p>
                <p><strong>Phone:</strong> [[${companyLogin.phone}]]</p>
                <p><strong>Email:</strong> [[${companyLogin.email}]]</p>
                <p><strong>Zipcode:</strong> [[${companyLogin.address.zipcode}]]</p>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="col-md-10 offset-md-2 p-4">
            <div class="row">
                <!-- Left column 7/12 -->
                <div class="col-lg-7">
                    <form action="/jobs/save-job" method="post">
                        <input name="id" th:value="${job != null} ? ${job.id} : ''" type="hidden">
                        <input name="action" th:value="${job != null} ? 'editJob' : 'addJob'" type="hidden">
                        <div class="mb-3">
                            <label for="jobName" class="form-label">Job Name</label>
                            <input type="text" class="form-control" id="jobName"
                                   placeholder="Enter job name" name="jobName"
                                   th:value="${job != null} ? ${job.jobName} : ''">
                        </div>
                        <div class="mb-3">
                            <label for="jobDescription" class="form-label">Description</label>
                            <textarea class="form-control" name="jobDescription"
                                      th:value="${job != null} ? ${job.jobDesc} : ''" id="jobDescription"
                                      rows="3" placeholder="">[[${job != null} ? ${job.jobDesc} : '']]</textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Save Job</button>
                    </form>
                </div>

                <!-- Right column 5/12 -->
                <div class="col-lg-5">

                    <form id="skillForm" action="/jobs/choose-skill" method="get">
                        <input name="jobId" th:value="${job != null} ? ${job.id} : ''" type="hidden">
                        <input name="action" value="addSkill" type="hidden">
                        <div class="mb-3">
                            <label for="selectSkill" class="form-label">Select Skill</label>
                            <select class="form-select" id="selectSkill" name="selectSkill">
                                <option th:each="skill: ${skills}" th:value="${skill.id}">[[${skill.skillName}]]
                                </option>
                                <!-- Add more options as needed -->
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="selectSkillLevel" class="form-label">Skill Level</label>
                            <select class="form-select" id="selectSkillLevel" name="skillLevel">\
                                <option th:each="level: ${skillLevels}" th:value="${level.getValue()}">
                                    [[${level.getValue()}]]
                                </option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="moreInfo" class="form-label">More Info</label>
                            <input type="text" class="form-control" id="moreInfo" name="moreInfo"
                                   placeholder="Enter additional information">
                        </div>
                        <button type="submit" class="btn btn-primary">Add Skill</button>
                    </form>

                    <!-- Table to display selected skills -->
                    <div class="mt-4">
                        <h5>Selected Skills</h5>
                        <table class="table table-bordered table-sm">
                            <thead>
                            <tr>
                                <th>Skill</th>
                                <th>Type skill</th>
                                <th>Level</th>
                                <th>More Info</th>
                                <th>Action</th>
                            </tr>
                            </thead>
                            <tbody id="skillsTable">
                            <tr th:each="jobSkill: ${jobSkills}">
                                <td th:text="${jobSkill.skill.skillName}"></td>
                                <td th:text="${jobSkill.skill.type.name()}"></td>
                                <td th:text="${jobSkill.skillLevel.name()}"></td>
                                <td th:text="${jobSkill.moreInfos}"></td>
                                <td>
                                    <form action="/jobs/choose-skill" method="get">
                                        <input type="hidden" name="action" value="removeSkill">
                                        <input type="hidden" name="skillId" th:value="${jobSkill.skill.id}">
                                        <input name="jobId" th:value="${job != null} ? ${job.id} : ''" type="hidden">
                                        <button type="submit" class="btn btn-danger">Remove</button>
                                    </form>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- Footer -->
<div class="text-white mb-3 mb-md-0 bg-primary"
     style="height: 60px; width: 100%; display: flex; justify-content: center; align-items: center;position: absolute; bottom: 0; left: 0; right: 0">
    <span>Tran Thi Thanh Tuyen - 21020281 - thanhtuyen9623@gmail.com</span>
</div>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.ckeditor.com/ckeditor5/39.0.0/classic/ckeditor.js"></script>
<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(async function () {
// Khởi tạo CKEditor cho textarea
        ClassicEditor
            .create(document.querySelector('textarea'))
            .catch(error => {
                console.error(error);
            });
    });
</script>
</body>
</html>